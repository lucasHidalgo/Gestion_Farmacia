<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--CSS ADMINUX -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link href="Adminux/css/bootstrap.css" rel="stylesheet" type="text/css"/>
        <link href="Adminux/css/dataTables.bootstrap4.css" rel="stylesheet" type="text/css"/>
        <link href="Adminux/css/responsive.dataTables.min.css" rel="stylesheet" type="text/css"/>
        <link href="Adminux/css/light_adminux.css" rel="stylesheet" type="text/css"/>
        <link href="Adminux/css/theme.css" rel="stylesheet" type="text/css"/>
        
        <!-- JS ADMINUX -->
        <script src="Adminux/js/jquery-2.1.1.min.js" type="text/javascript"></script>
        <script src="Adminux/js/popper.js" type="text/javascript"></script>
        <script src="Adminux/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="Adminux/js/circle-progress.min.js" type="text/javascript"></script>
        <script src="Adminux/js/adminux.js" type="text/javascript"></script>
        <script src="Adminux/js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script src="Adminux/js/jquery.sparkline.min.js" type="text/javascript"></script>
        <script src="Adminux/js/dataTables.bootstrap4.js" type="text/javascript"></script>
        <script src="Adminux/js/dataTables.responsive.min.js" type="text/javascript"></script>
        <style>
          #map {
        height: 550px;
        width: 60%;
       }
        </style>
    </head>
    <body class="menuclose-right">
  <!-- Page Loader -->
<div class="loader_wrapper align-items-center text-center" style="display: none;">
  <div class="load7 load-wrapper">
    
    <div class="loader"> Loading... </div>
    <div class="clearfix"></div>
    <br>
    <br>
    <br>
    <br>
    <h4 class="text-white">Petal of Flower</h4>
    <p>Awesome things are getting ready...</p>
  </div>
</div>
<!-- Page Loader Ends -->

<header class="navbar-fixed">
  <nav class="navbar navbar-toggleable-md navbar-inverse bg-faded">
              <div class="sidebar-left"> 
                  <a class="navbar-brand imglogo" href="index.html">
                      RivotrilYa <img src="Fotos Gestion Farmacia/logo.jpg" width=45em />
          </a>
      <button class="btn btn-link icon-header mr-sm-2 pull-right menu-collapse"><span class="fa fa-bars"></span></button>
    </div>
    <form class="form-inline mr-sm-2  pull-left search-header hidden-md-down">
      <input class="form-control " type="text" placeholder="Search" id="search_header">
      <button class="btn btn-link icon-header " type="submit"><span class="fa fa-search"></span></button>
    </form>
    <div class="d-flex mr-auto"> &nbsp;</div>
    <ul class="navbar-nav content-right">      
      <li class="v-devider"></li>
      <li class="nav-item active">
        <button class="btn btn-link icon-header " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-envelope-o"></span> <span class="badge-number bg-success"></span></button>
        <div class="dropdown-menu message-container">
          <div class="list-unstyled"> <a href="#" class="media"> <span class="message_userpic"></span>
            <div class="media-body">
              <h6 class="mt-0 mb-1">Dhananjay Chauhan</h6>
              Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. </div>
            </a> <a href="#" class="media"> <span class="message_userpic"></span>
            <div class="media-body">
              <h6 class="mt-0 mb-1">Max Smith</h6>
              Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. </div>
            </a> <a href="#" class="media"> <span class="message_userpic"></span>
            <div class="media-body">
              <h6 class="mt-0 mb-1">Astha Smith</h6>
              Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. </div>
            </a> <a href="#" class="media"> <span class="message_userpic"></span>
            <div class="media-body">
              <h6 class="mt-0 mb-1">Tommy Cruszii</h6>
              Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. </div>
            </a> <a href="#" class="media"> <span class="message_userpic"></span>
            <div class="media-body">
              <h6 class="mt-0 mb-1">Max Smith</h6>
              Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. </div>
            </a> </div>
        </div>
      </li>
      <li class="nav-item">
        <button class="btn btn-link icon-header badgeCircle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-bell-o"></span><span class="badge-number bg-danger"></span></button>
        <div class="dropdown-menu message-container">
          <div class="list-unstyled">
            <div class="media"> <span class="alert-block bg-primary"><span class="fa fa-bullhorn"></span></span>
              <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.</div>
            </div>
            <div class="media"> <span class="alert-block bg-warning"><span class="fa fa-bell-o"></span></span>
              <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.</div>
            </div>
            <div class="media"> <span class="alert-block bg-danger"><span class="fa fa-exclamation-triangle"></span></span>
              <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.</div>
            </div>
            <div class="media">
              <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.</div>
            </div>
            <div class="media">
              <div class="media-body"><b>Max Smith</b> updated post of <b>Astha Smith</b>. Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin.</div>
            </div>
          </div>
        </div>
      </li>
      <li class="nav-item hidden-xs-down">
        <button class="btn btn-link icon-header " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-th"></span> </button>
        <div class="dropdown-menu message-container box-links">
          <div class="list-unstyled"> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-bullhorn"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-bell-o"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-calendar"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-id-card"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-handshake-o"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-camera-retro"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-flask"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-plane"></span></span> </a> <a href="?#" class="media"> <span class="quick-block "><span class="fa fa-pie-chart"></span></span> </a> </div>
        </div>
      </li>
      <li class="v-devider"></li>
      <li class="nav-item "> <a class="btn btn-link icon-header menu-collapse-right" href="#"><span class="fa fa-podcast"></span> </a> </li>
    </ul>
    <div class="sidebar-right pull-right ">
      <ul class="navbar-nav  justify-content-end">
        <li class="nav-item">
          <button class="btn-link btn userprofile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="userpic"></span> <span class="text">Usuario</span></button>
          <div class="dropdown-menu"> <a class="dropdown-item" href="customerprofile.html">Profile</a> <a class="dropdown-item" href="#">Analytics Report</a>            
             </div>
        </li>
        <li><a href="sign-in2.html" class="btn btn-link icon-header"><span class="fa fa-sign-out"></span></a></li>
      </ul>
    </div>
  </nav>
</header>
<div class="sidebar-left">
  <div class="user-menu-items">
    <div class="list-unstyled btn-group">
      <button class="media btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="message_userpic"><img class="d-flex" src="../img/user-header.png" alt="Generic user image"></span> <span class="media-body"> <span class="mt-0 mb-1">Usuario</span> <small>New Jersey, UK.</small> </span> </button>
      <div class="dropdown-menu"> <a class="dropdown-item" href="customerprofile.html">Mi perfil</a>  <a class="dropdown-item" href="#">Ultimas compras</a>       
        </div>
    </div>
  </div>
  <br class="show">
  <ul class="nav flex-column in" id="side-menu" style="">
    <li class="title-nav">MENU</li>
    <li class="nav-item "> <a href="javascript:void(0)" class="menudropdown nav-link show">Sucursales<i class="fa fa-angle-down "></i></a>
      <ul class="nav flex-column nav-second-level  in" style="display: block;">
        <li class="nav-item active"><a href="Sucursales.html" class="nav-link  active"><i class="fa fa-globe"></i> Mapa</a></li>   
      </ul>
      <!-- /.nav-second-level --> 
    </li>
    <li class="nav-item "> <a href="javascript:void(0)" class="menudropdown nav-link">Productos<i class="fa fa-angle-down "></i></a>
      <ul class="nav flex-column nav-second-level">
        <li class="in nav-item"><a href="Reservas.html" class="nav-link ">Reservas</a></li>   
      </ul>
      <!-- /.nav-second-level --> 
    </li>
    <li class="nav-item"> <a href="javascript:void(0)" class="menudropdown nav-link">Busqueda Laboral <i class="fa fa-angle-down "></i></a>
      <ul class="nav flex-column nav-second-level">
        <li class="nav-item"><a class="nav-link" href="BusquedaLaboral.html">Busqueda Laboral</a></li>    
      </ul>
      <!-- /.nav-second-level --> 
    </li>   
    </div>    


<div class="wrapper-content">
  <div class="container col-lg-15">
      <div class="row">
      <div class="col-sm-16">             
        <div class="card">
          <div class="card-header">
            <h6 class="card-title">Step Wizard Thin</h6>
          </div>
          <div class="card-body">
            <div class="container_wizard wizard-thin">
              <div class="stepwizard">
                <div class="stepwizard-row setup-panel d-flex">
                  <div class="stepwizard-step col"> <a href="#step-12" class="btn success btn-primary"><span class="btn-round">1</span>
                    <p>Fill details<small>Setup guidelines</small></p>
                    </a> </div>
                  <div class="stepwizard-step col"> <a href="#step-22" class="btn btn-secondary success disabled"><span class="btn-round">2</span>
                    <p>Step 2<small>Confirm</small></p>
                    </a> </div>
                  <div class="stepwizard-step col"> <a href="#step-32" class="btn btn-secondary success disabled"><span class="btn-round">3</span>
                    <p>Step 3<small>Make payment</small></p>
                    </a> </div>
                </div>
              </div>
              <form class="container-fluid p-0">
                <div class="row setup-content" id="step-12" style="display: flex;">
                  <div class="col-sm-16">
                    <div class="row">
                      <div class="col-sm-16">
                        <h3 class=" mb-2"> Step 1</h3>
                      </div>
                    </div>
                    <br>
                    <div class="row">
                    <div id="map"></div>    
                    <div class="col-md-6 col-lg-6 col-xl-6">
                    <div class="card full-screen-container">
                      <div class="card-header align-items-start justify-content-between flex">
                        <h5 class="card-title  pull-left">Sucursales </h5>
                      
                      </div>
                      <div class="card-body">
                        <div id="sucursales" class="list-unstyled comment-list" style="height:400px;">                                                            
                          </div>
                        </div>
                      </div>                      
                    </div>
                  </div>                
                    <div class="wizard-footer">
                      <div class="col-sm-16 ">
                        <button class="btn btn-primary nextBtn btn-lg pull-right" type="button">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row setup-content" id="step-22" style="display: none;">
                  <div class="col-sm-16">
                    <div class="row">
                      <div class="col-sm-16">
                        <h3 class=" mb-2"> Step 2</h3>
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-sm-16 col-md-8 col-lg-6">
                        <div class="form-group">
                          <label class="form-control-label">Company Name</label>
                          <input maxlength="200" type="text" required="" class="form-control" placeholder="Enter Company Name">
                        </div>
                        <div class="form-group">
                          <label class="form-control-label">Company Address</label>
                          <input maxlength="200" type="text" required="" class="form-control" placeholder="Enter Company Address">
                        </div>
                      </div>
                    </div>
                    <div class="wizard-footer">
                      <div class="col-sm-16 ">
                        <button class="btn btn-primary nextBtn btn-lg pull-right" type="button">Next</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row setup-content" id="step-32" style="display: none;">
                  <div class="col-sm-16">
                    <div class="row">
                      <div class="col-sm-16">
                        <h3 class=" mb-2"> Step 3</h3>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-16">
                        <div class="alert alert-success" role="alert">
                          <h4 class="alert-heading">Well done!</h4>
                          <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
                          <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
                        </div>
                      </div>
                    </div>
                    <br>
                    <div class="wizard-footer">
                      <div class="col-sm-16 ">
                        <button class="btn btn-success btn-lg pull-right" type="submit">Finish!</button>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>       
      </div>
    </div>
  </div>
</div> <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCCRkGIJlO76NKI82zhEJ4leGih0-2u46g&callback=initMap">
    </script>
<script>
    
  function initMap() {
    var marcadores = new Array;
    var uluru = {
        lat: -34.613089,
        lng: -58.499307
    };
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 14,
        center: uluru
    });
    obtenerSucursales();
function obtenerSucursales() {
    fetch('./Sucursal')
        .then(
            function(response) {
                if (response.status !== 200) {
                    console.log('Looks like there was a problem. Status Code: ' +
                        response.status);
                    return;
                }
                // Examine the text in the response
                response.json().then(function(data) {
                    var i = 0;
                    //while por cada barrio
                    while (i < data.length) {                        
                        let barrio = data[i].Nombre;
                        //html de la cabeza del barrio
                        let barrioHtml = ` <div class="media"> <span class="message_userpic"><i class="fa fa-map-marker"></i> <span class="user-status bg-success "></span></span>
                              <div class="media-body">
                            <h6 class="mt-0 mb-1">${barrio} </h6>
                            <p class="description">`;
                    //for por cada sucursal dentro del barrio                    
                        for (let x = 0; x < data[i].Sucursales.length; x++) {
                            let sucursal = data[i].Sucursales[x];
                            // por cada sucursal agrego marcador del maps
                            agregarMarcador({lat: parseFloat(sucursal.Latitud),lng: parseFloat(sucursal.Longitud)}, sucursal.Nombre, sucursal.Id);
                            //agrego nombre,direccion y telefono de la sucursal
                             barrioHtml += `<a class="seleccionSucursal" data-id="${sucursal.Id}" data-lat="${sucursal.Latitud}" data-long="${sucursal.Longitud}"> 
                             ${sucursal.Nombre} , ${sucursal.Direccion} , ${sucursal.Telefono1}  </a><br>`;
                        }
                        //cuando no hay mas sucursales dentro del barrio, sigo con el siguiente barrio.
                         barrioHtml += `</p></div></div><hr>`;
                         document.querySelector("#sucursales").innerHTML += barrioHtml;                               
                        i++;
                    }                        
                      agregarEventosClick();
                });
            }
        )
        .catch(function(err) {
            console.log('Fetch Error :-S', err);
        });                      
}

function agregarEventosClick(){
      var el = document.querySelectorAll('.seleccionSucursal');
        for(var i=0; i < el.length; i++){
            el[i].addEventListener('click', function () {
                // el sucursalId es el mismo que se le agrega como id al marcador
                let sucursalId = this.dataset.id;                                  
                 for(let x = 0; x < marcadores.length;x++){
                     if(marcadores[x].id == sucursalId){
                          map.setZoom(16);
                          map.panTo(marcadores[x].position);
                           infoWindow.open(map, marker);
                     }                     
                 }                                  
            }, false);
        }
}

    //funcion para agregar marcador en el mapa con su nombre
    function agregarMarcador(coordenadas, nombreSucursal, id) {
        var marker = new google.maps.Marker({
            position: coordenadas,
            map: map,
            id: id
        });
        var infoWindow = new google.maps.InfoWindow({
            content: '<h5> ' + nombreSucursal + '</h5>'
        });

        marker.addListener('click', function() {
            infoWindow.open(map, marker);
        });
        marcadores.push(marker);

    }                                        
}



$(document).on('ready', function() {    
    $(".container_wizard").each(function() {
        var navListItems = $(this).find('div.setup-panel div a'),
            allWells = $(this).find('.setup-content'),
            allNextBtn = $('.nextBtn');
        allWells.hide();
        navListItems.click(function(e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                $item = $(this);
            navListItems.removeClass('btn-primary').addClass('btn-secondary');
            $item.addClass('btn-primary');
            $item.removeClass('btn-secondary');
            $item.removeClass('disabled');
            allWells.hide();
            $target.show();
            $target.find('input:eq(0)').focus();
        });
        allNextBtn.click(function() {
            var curStep = $(this).closest(".setup-content"),
                curStepBtn = curStep.attr("id"),
                nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                curInputs = curStep.find("input[type='text'],input[type='url']"),
                isValid = true;
            $(".form-group").removeClass("has-danger");
            for (var i = 0; i < curInputs.length; i++) {
                if (!curInputs[i].validity.valid) {
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-danger");
                }
            }
            if (isValid)
                nextStepWizard.removeAttr('disabled').trigger('click');
        });
        $(this).find('.setup-panel div a.btn-primary').trigger('click');
    });
});
</script>

    </body>
</html>
