<!DOCTYPE html>
<html>
  <head>
    <style>
      #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>Sucursales</h3>
    
  
      <table width="100%" border="1" height="100%">
        <tr>
          <td width="54%" height="47">  <div id="map";>
    <script>               
      function initMap() {          
        var uluru = {lat: -34.613089, lng: -58.499307};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,
          center: uluru
        });
        obtenerSucursales();

        
        
        //agregarMarcador({lat: -34.613089, lng: -58.499307},'nombre sucursal1');
        
        
        
        
        
        function obtenerSucursales(){
         fetch('./Sucursal')
            .then(
            function(response) {
            if (response.status !== 200) {
               console.log('Looks like there was a problem. Status Code: ' +
                response.status);
                return;
            }
      // Examine the text in the response
      response.json().then(function(data) {
          var i = 0;
          while(i < data.length){
              agregarMarcador({lat: data[i].Latitud
              ,lng: data[i].Longitud}
              ,data[i].Nombre);   
              console.log(data[i].Latitud);
              i++;
          }
        
      });
    }
  )
  .catch(function(err) {
    console.log('Fetch Error :-S', err);
  });
        }
        
        //funcion para agregar marcador en el mapa con su nombre
        function agregarMarcador(coordenadas, nombreSucursal){
        var marker = new google.maps.Marker({
              position: coordenadas,
              map: map
        });
        
        var infoWindow = new google.maps.InfoWindow({
           content: '<h5> '+nombreSucursal+'</h5>' 
        });
        
        marker.addListener('click',function(){
            infoWindow.open(map,marker);
        });
      }
      
        
   }
   
    </script>
     <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCCRkGIJlO76NKI82zhEJ4leGih0-2u46g&callback=initMap">
    </script>
</td>
          <td width="46%">&nbsp;
                    
          </td>
        </tr>
      </table> 
     
    
 
    
    
  
    
</body>
</html>
